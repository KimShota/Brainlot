# 🤖 Google Play Console 提出ガイド

このガイドでは、BrainlotアプリをGoogle Play Consoleに提出して、Google Playストアで公開する手順を詳しく説明します。

## 📋 目次

1. [事前準備](#事前準備)
2. [Google Play Consoleアカウントの設定](#google-play-consoleアカウントの設定)
3. [アプリの作成と基本情報の入力](#アプリの作成と基本情報の入力)
4. [ストアリスティングの設定](#ストアリスティングの設定)
5. [アプリコンテンツの設定](#アプリコンテンツの設定)
6. [プライバシーポリシーとセキュリティ](#プライバシーポリシーとセキュリティ)
7. [アプリの署名キーの設定](#アプリの署名キーの設定)
8. [プロダクションビルドの作成](#プロダクションビルドの作成)
9. [サブスクリプション製品の設定](#サブスクリプション製品の設定)
10. [リリースの作成と提出](#リリースの作成と提出)
11. [審査と公開](#審査と公開)

---

## ✅ 事前準備

### 1. 必要な情報を確認

提出前に、以下の情報を準備してください：

- ✅ **アプリ名**: Brainlot
- ✅ **パッケージ名**: `com.brainlot.app`
- ✅ **バージョン名**: `1.0.0` (app.jsonから)
- ✅ **バージョンコード**: `6` (app.jsonから)
- ✅ **プライバシーポリシーURL**: 準備済み（`docs/privacy-policy.html`）
- ✅ **アプリ説明文**: 準備済み（app.jsonから）
- ✅ **アプリアイコン**: 準備済み（`assets/images/icon.png`）
- ✅ **スクリーンショット**: 準備が必要（後述）

### 2. ビルド設定の確認

現在の設定を確認：

```json
// app.json
{
  "android": {
    "package": "com.brainlot.app",
    "versionCode": 6,
    "version": "1.0.0"
  }
}
```

### 3. 必要なファイルの準備

- [ ] アプリアイコン（512x512px PNG形式）
- [ ] 機能グラフィック（1024x500px、オプション）
- [ ] スクリーンショット（最低2枚、推奨5-8枚）
  - スマートフォン用: 16:9または9:16の比率
  - 最小サイズ: 320px
  - 最大サイズ: 3840px
- [ ] プライバシーポリシー（公開URL）

---

## 🔐 Google Play Consoleアカウントの設定

### ステップ1: Google Play Consoleアカウントを作成

1. **Google Play Console** にアクセス
   - https://play.google.com/console

2. **Googleアカウントでログイン**
   - 開発者アカウントとして使用するGoogleアカウントでログイン

3. **開発者登録料を支払う**
   - 初回のみ **$25（約3,500円）** の登録料が必要
   - クレジットカードまたはデビットカードで支払い
   - **一度支払えば、今後追加のアプリを無料で公開できます**

### ステップ2: 開発者アカウント情報を入力

1. **アカウント詳細** を入力
   - 開発者名（公開される名前）
   - メールアドレス
   - 電話番号
   - 住所

2. **支払い情報** を設定
   - クレジットカード情報を入力
   - 登録料を支払う

---

## 📱 アプリの作成と基本情報の入力

### ステップ1: 新しいアプリを作成

1. **Google Play Console** のダッシュボードに移動

2. **「アプリを作成」** ボタンをクリック

3. **アプリの詳細** を入力：
   - **アプリ名**: `Brainlot`
   - **デフォルト言語**: `日本語（日本）`
   - **アプリまたはゲーム**: `アプリ`
   - **無料または有料**: `無料`（アプリ自体は無料、サブスクリプションで収益化）

4. **デベロッパープログラムポリシー** に同意

5. **「作成」** をクリック

### ステップ2: アプリの基本情報を設定

1. **「アプリのアクセス権限」** セクションで：
   - **管理対象のGoogle Playでの公開**: `すべての国と地域` または特定の国を選択

2. **「アプリのカテゴリ」** を選択：
   - **カテゴリ**: `教育`
   - **タグ**: `学習`、`クイズ`、`教育` など

---

## 🎨 ストアリスティングの設定

### ステップ1: アプリの説明を入力

1. **「ストアの掲載情報」** → **「メインストアの掲載情報」** に移動

2. **アプリの説明** を入力（最大4,000文字）：
   ```
   Brainlot - AI搭載の学習プラットフォーム
   
   学習資料をインタラクティブなMCQ（多肢選択問題）に変換しましょう。
   PDFや画像をアップロードしてクイズを生成し、TikTokスタイルのスワイプ可能な
   フラッシュカードで移動中に学習できます。
   
   主な機能：
   - PDFや画像から自動でクイズを生成
   - スワイプ可能なフラッシュカード形式の学習
   - AIによる問題の自動生成
   - 学習進捗の追跡
   - プロプランで無制限のクイズ生成
   ```

3. **短い説明** を入力（最大80文字）：
   ```
   AI搭載の学習プラットフォーム。PDFや画像からクイズを生成して学習
   ```

### ステップ2: グラフィックアセットをアップロード

1. **アプリアイコン**（必須）:
   - サイズ: **512x512px**
   - 形式: PNG（透明度なし）
   - ファイル: `assets/images/icon.png` を使用

2. **機能グラフィック**（オプション、推奨）:
   - サイズ: **1024x500px**
   - 形式: PNGまたはJPG
   - Google Playストアのトップページに表示される可能性があります

3. **スクリーンショット**（必須、最低2枚）:
   - **スマートフォン用**:
     - 最低2枚、推奨5-8枚
     - 比率: 16:9または9:16
     - 最小サイズ: 320px
     - 最大サイズ: 3840px
   - **タブレット用**（オプション）:
     - 最低2枚
     - 比率: 16:9または9:16

   **スクリーンショットの推奨内容**:
   - アプリのホーム画面
   - クイズ生成画面
   - クイズ回答画面
   - スコアサマリー画面
   - サブスクリプション画面

4. **動画**（オプション）:
   - YouTube URLを追加可能
   - アプリの使い方を説明する動画

### ステップ3: その他の情報を入力

1. **連絡先の詳細**:
   - **メールアドレス**: サポート用のメールアドレス
   - **電話番号**: オプション
   - **ウェブサイト**: `https://brainlot.app`（存在する場合）

2. **プライバシーポリシー**:
   - **URL**: プライバシーポリシーの公開URL
   - 例: `https://brainlot.app/privacy-policy` または GitHub PagesのURL

---

## 📄 アプリコンテンツの設定

### ステップ1: コンテンツレーティングを設定

1. **「アプリコンテンツ」** → **「コンテンツレーティング」** に移動

2. **質問に回答**:
   - アプリの内容に関する質問に回答
   - 通常の教育アプリの場合、**「Everyone」** または **「Everyone 10+」** になることが多い

3. **レーティングを確認**:
   - 回答に基づいて自動的にレーティングが決定されます

### ステップ2: ターゲットオーディエンスを設定

1. **「ターゲットオーディエンス」** セクションで：
   - **主なターゲット**: `13歳以上` または `18歳以上`（アプリの内容に応じて）
   - **主な機能**: 該当する機能を選択

### ステップ3: データセーフティを設定

1. **「データセーフティ」** セクションで：
   - アプリが収集するデータの種類を宣言
   - データの使用方法を説明
   - データの共有方法を説明

   **Brainlotアプリの場合、通常は以下を宣言**:
   - ✅ **個人情報**: メールアドレス、アカウント情報
   - ✅ **アプリ情報**: アプリの使用状況
   - ✅ **デバイス情報**: デバイスID（オプション）
   - ✅ **写真や動画**: ユーザーがアップロードする画像

---

## 🔒 プライバシーポリシーとセキュリティ

### ステップ1: プライバシーポリシーを公開

1. **プライバシーポリシーを公開URLに配置**:
   - GitHub Pages、Netlify、Vercelなどでホスティング
   - または、既存のウェブサイトに配置

2. **URLをGoogle Play Consoleに入力**:
   - **「ストアの掲載情報」** → **「プライバシーポリシー」** セクション
   - プライバシーポリシーのURLを入力

### ステップ2: セキュリティ設定

1. **「アプリのアクセス権限」** セクションで：
   - アプリが使用する権限を確認
   - 現在の設定:
     - `READ_EXTERNAL_STORAGE`
     - `WRITE_EXTERNAL_STORAGE`
     - `CAMERA`

2. **権限の説明**:
   - 各権限の使用目的を明確に説明
   - 例: 「カメラ権限は、学習資料の写真を撮影するために使用されます」

---

## 🔑 アプリの署名キーの設定

### ステップ1: Google Play App Signingを有効化（推奨）

Google Play App Signingを使用すると、Googleがアプリの署名を管理してくれます。

1. **「リリース」** → **「設定」** → **「アプリの署名」** に移動

2. **「Google Play アプリ署名を使用する」** を選択

3. **アップロードキーを生成**:
   - EAS Buildを使用している場合、自動的に処理されます
   - 手動でビルドする場合は、アップロードキーを作成する必要があります

### ステップ2: EAS Buildでの署名設定

EAS Buildを使用している場合、署名は自動的に処理されます：

1. **EAS Buildでビルド**:
   ```bash
   cd frontend
   eas build --platform android --profile production
   ```

2. **ビルドが完了すると**:
   - EASが自動的に署名キーを管理
   - Google Play App Signingと統合

### ステップ3: 手動でキーストアを作成する場合（オプション）

EAS Buildを使用しない場合：

```bash
# キーストアを作成
keytool -genkeypair -v -storetype PKCS12 -keystore brainlot-release.keystore \
  -alias brainlot-key -keyalg RSA -keysize 2048 -validity 10000

# キーストアの情報を安全に保管
# - キーストアファイル（.keystore）
# - パスワード
# - エイリアス名
# - エイリアスのパスワード
```

**重要**: キーストアファイルとパスワードは安全に保管してください。紛失すると、アプリの更新ができなくなります。

---

## 🏗️ プロダクションビルドの作成

### ステップ1: EAS Buildでビルド

1. **プロジェクトディレクトリに移動**:
   ```bash
   cd frontend
   ```

2. **プロダクションビルドを作成**:
   ```bash
   eas build --platform android --profile production
   ```

3. **ビルドの進行状況を確認**:
   - EAS Dashboardでビルドの進行状況を確認
   - ビルドが完了するまで待機（通常10-30分）

4. **ビルドが完了したら**:
   - `.aab`（Android App Bundle）ファイルが生成されます
   - EAS Dashboardからダウンロード可能

### ステップ2: ビルドの確認

1. **ビルド情報を確認**:
   - バージョンコード: `6`
   - バージョン名: `1.0.0`
   - パッケージ名: `com.brainlot.app`

2. **ビルドをテスト**（オプション）:
   ```bash
   # Internal Testingトラックにアップロードしてテスト
   eas submit --platform android --profile production
   ```

---

## 💰 サブスクリプション製品の設定

### ステップ1: サブスクリプション製品を作成

1. **「収益化」** → **「サブスクリプション」** に移動

2. **「サブスクリプション製品を作成」** をクリック

3. **製品の詳細** を入力：
   - **製品ID**: RevenueCatで使用している製品IDと一致させる
     - 例: `monthly_pro` または `pro_monthly`
   - **名前**: `Brainlot Pro - 月額`
   - **説明**: `無制限のクイズ生成、広告なし、すべての機能にアクセス`
   - **請求期間**: `1ヶ月`
   - **価格**: 希望する価格を設定（例: ¥980/月）

4. **「保存」** をクリック

### ステップ2: サブスクリプションの設定を完了

1. **無料トライアル**（オプション）:
   - 無料トライアル期間を設定可能
   - 例: 7日間の無料トライアル

2. **プロモーション**（オプション）:
   - 初回購入割引などを設定可能

3. **ローカライゼーション**:
   - 複数の言語で製品情報を入力可能

### ステップ3: RevenueCatとの連携を確認

1. **RevenueCat Dashboard** で：
   - Google Play Consoleの製品IDが正しく設定されているか確認
   - 製品がRevenueCatにリンクされているか確認

2. **製品IDの一致を確認**:
   - Google Play Consoleの製品ID
   - RevenueCat Dashboardの製品ID
   - アプリコード内の製品ID
   - これらがすべて一致している必要があります

---

## 🚀 リリースの作成と提出

### ステップ1: 内部テストトラックでテスト（推奨）

1. **「リリース」** → **「テスト」** → **「内部テスト」** に移動

2. **新しいリリースを作成**:
   - **「リリースを作成」** をクリック
   - ビルドした `.aab` ファイルをアップロード
   - または、EAS Submitを使用:
     ```bash
     eas submit --platform android --profile production
     ```

3. **リリース名を入力**:
   - 例: `Version 1.0.0 (6)`

4. **リリースノートを入力**:
   ```
   初回リリース
   - AI搭載のクイズ生成機能
   - スワイプ可能なフラッシュカード
   - プロプランのサブスクリプション
   ```

5. **テスターを追加**:
   - 内部テスト用のメールアドレスを追加
   - License Testerとして追加したアカウントを使用

6. **「レビューに送信」** をクリック

7. **テストを実行**:
   - テスターがアプリをインストールしてテスト
   - 購入フロー、サブスクリプション機能などをテスト

### ステップ2: 本番リリースを作成

1. **「リリース」** → **「本番環境」** → **「本番環境のトラック」** に移動

2. **新しいリリースを作成**:
   - **「リリースを作成」** をクリック
   - ビルドした `.aab` ファイルをアップロード
   - または、EAS Submitを使用:
     ```bash
     eas submit --platform android --profile production
     ```

3. **リリース名を入力**:
   - 例: `Version 1.0.0 (6)`

4. **リリースノートを入力**:
   ```
   初回リリース
   - AI搭載のクイズ生成機能
   - スワイプ可能なフラッシュカード
   - プロプランのサブスクリプション
   ```

5. **「レビューに送信」** をクリック

### ステップ3: 提出前の最終確認

提出前に、以下を確認してください：

- [ ] すべての必須項目が入力されている
- [ ] プライバシーポリシーが公開されている
- [ ] スクリーンショットがアップロードされている
- [ ] アプリアイコンがアップロードされている
- [ ] コンテンツレーティングが完了している
- [ ] データセーフティが設定されている
- [ ] サブスクリプション製品が作成されている
- [ ] ビルドが正常に完了している
- [ ] リリースノートが入力されている

---

## ✅ 審査と公開

### ステップ1: 審査プロセス

1. **提出後**:
   - Google Play Consoleで **「審査中」** と表示されます
   - 通常、審査には **数時間から数日** かかります

2. **審査中の確認事項**:
   - アプリがポリシーに準拠しているか
   - プライバシーポリシーが適切か
   - コンテンツが適切か
   - サブスクリプションが正しく設定されているか

### ステップ2: 審査結果の確認

1. **審査が完了すると**:
   - メールで通知が届きます
   - Google Play Consoleでステータスが更新されます

2. **承認された場合**:
   - アプリが自動的に公開されます（設定に応じて）
   - または、手動で公開する必要があります

3. **却下された場合**:
   - 却下理由が通知されます
   - 問題を修正して再提出します

### ステップ3: アプリの公開

1. **「リリース」** → **「本番環境」** に移動

2. **公開設定を確認**:
   - **「段階的公開」** を選択可能（推奨）
     - 最初は少数のユーザーに公開
     - 問題がなければ段階的に拡大
   - または、**「すべてのユーザーに公開」** を選択

3. **「公開」** をクリック

4. **公開の確認**:
   - アプリがGoogle Playストアで利用可能になります
   - 通常、数時間以内にストアに表示されます

---

## 📊 提出後の管理

### 1. アプリの更新

新しいバージョンをリリースする場合：

1. **app.jsonでバージョンを更新**:
   ```json
   {
     "android": {
       "versionCode": 7,  // 必ず増やす
       "version": "1.0.1"  // セマンティックバージョニング
     }
   }
   ```

2. **新しいビルドを作成**:
   ```bash
   eas build --platform android --profile production
   ```

3. **新しいリリースを作成**:
   - Google Play Consoleで新しいリリースを作成
   - 新しい `.aab` ファイルをアップロード

### 2. アプリの分析

1. **「統計情報」** セクションで：
   - インストール数
   - ユーザー評価
   - クラッシュレポート
   - 収益データ

### 3. ユーザーレビューへの対応

1. **「評価とレビュー」** セクションで：
   - ユーザーレビューを確認
   - 必要に応じて返信

---

## ⚠️ よくある問題と解決方法

### 問題1: 「アプリの署名が一致しません」

**原因**: アップロードキーが変更された、または間違ったキーを使用している

**解決方法**:
1. Google Play App Signingを使用している場合、Googleに連絡
2. アップロードキーをリセットする必要がある場合があります

### 問題2: 「プライバシーポリシーが見つかりません」

**原因**: プライバシーポリシーのURLが無効、またはアクセスできない

**解決方法**:
1. プライバシーポリシーのURLが正しく公開されているか確認
2. URLが正しく入力されているか確認

### 問題3: 「サブスクリプション製品が見つかりません」

**原因**: 製品IDが一致していない、または製品が承認されていない

**解決方法**:
1. Google Play Consoleの製品IDを確認
2. RevenueCat Dashboardの製品IDと一致しているか確認
3. アプリコード内の製品IDと一致しているか確認

### 問題4: 「コンテンツレーティングが完了していません」

**原因**: コンテンツレーティングの質問に回答していない

**解決方法**:
1. 「アプリコンテンツ」 → 「コンテンツレーティング」 に移動
2. すべての質問に回答

### 問題5: 「データセーフティが設定されていません」

**原因**: データセーフティの宣言が完了していない

**解決方法**:
1. 「アプリコンテンツ」 → 「データセーフティ」 に移動
2. アプリが収集するデータを宣言

---

## 📝 チェックリスト

提出前に、以下を確認してください：

### 必須項目
- [ ] Google Play Consoleアカウントが作成されている
- [ ] 開発者登録料（$25）を支払った
- [ ] アプリの基本情報が入力されている
- [ ] ストアリスティングが完了している
- [ ] アプリアイコンがアップロードされている
- [ ] スクリーンショットが最低2枚アップロードされている
- [ ] プライバシーポリシーが公開されている
- [ ] コンテンツレーティングが完了している
- [ ] データセーフティが設定されている
- [ ] プロダクションビルドが作成されている
- [ ] サブスクリプション製品が作成されている（該当する場合）
- [ ] リリースノートが入力されている

### 推奨項目
- [ ] 機能グラフィックがアップロードされている
- [ ] 動画（YouTube URL）が追加されている
- [ ] 内部テストでテストが完了している
- [ ] 複数の言語でストアリスティングが設定されている

---

## 🎯 次のステップ

アプリが公開された後：

1. **アプリの監視**:
   - クラッシュレポートを確認
   - ユーザーレビューを確認
   - 収益データを確認

2. **マーケティング**:
   - ソーシャルメディアで宣伝
   - ウェブサイトにリンクを追加
   - プレスリリースを配信

3. **継続的な改善**:
   - ユーザーフィードバックに基づいて改善
   - 新機能を追加
   - バグを修正

---

## 📚 参考リンク

- [Google Play Console](https://play.google.com/console)
- [Google Play Console ヘルプ](https://support.google.com/googleplay/android-developer)
- [Android アプリの公開ガイド](https://developer.android.com/distribute/googleplay/start)
- [EAS Build ドキュメント](https://docs.expo.dev/build/introduction/)
- [RevenueCat ドキュメント](https://docs.revenuecat.com/)

---

**質問や問題があれば、Google Play Consoleのヘルプセクションを参照するか、サポートに連絡してください！**

**Good luck with your submission! 🚀**

